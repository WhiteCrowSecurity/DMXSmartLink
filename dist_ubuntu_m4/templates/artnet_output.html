{% extends "base.html" %}

{% block title %}Art-Net Output - DMXSmartLink Hub{% endblock %}

{% block extra_head %}
  <script>
    function fetchLog() {
      fetch('/artnet_output_raw')
        .then(response => response.text())
        .then(text => {
          document.getElementById("logContent").innerText = text;
          var pre = document.getElementById("logContent");
          var auto = document.getElementById("autoScroll");
          if (!auto || auto.checked) {
          pre.scrollTop = pre.scrollHeight;
          }
        })
        .catch(err => {
          document.getElementById("logContent").innerText = "Error fetching log: " + err;
        });
    }
    window.onload = function() {
      fetchLog();
      setInterval(fetchLog, 2000);
    };
  </script>
{% endblock %}

{% block content %}
  <div class="container">
    <a href="{{ url_for('index') }}" class="back-link">‚Üê Back to Dashboard</a>
    <h1>Art-Net Controller Output</h1>
    <p style="color: #a0a0a0; margin-bottom: 24px;">Live log output from the Art-Net listener. Updates every 2 seconds.</p>

    <label style="display:flex; align-items:center; gap:10px; color:#a0a0a0; margin-bottom:12px;">
      <input type="checkbox" id="autoScroll" checked>
      Auto-scroll
    </label>
    
    <div class="card" style="padding: 0;">
      <div class="log-container">
        <pre id="logContent">Loading...</pre>
      </div>
    </div>
  </div>
{% endblock %}

